<!doctype html>
<title>Frogeye Viewer</title>
<style>
table {border-collapse: collapse;}
td {width: 9px; height: 9px; border: 1px solid #000; }
</style>

<article>
<h1>Frogeye Viewer</h1>

<div id="frogview"></div>

<script>
function createViewerTable() {
    var tbl = document.createElement('table'),
        x,
        xLen = 64,
        y,
        yLen = 48,
        row,
        cell;

    for (y = 0; y < yLen; y += 1) {
        row = tbl.insertRow();
        for (x = 0; x < xLen; x += 1) {
            cell = row.insertCell();
            cell.id = 'fe' + x + '-' + y;
        }
    }
    document.getElementById('frogview').appendChild(tbl);
}

function init() {
    createViewerTable();

    if ("WebSocket" in window) {
      var ws = new WebSocket("ws://192.168.1.91:3000");
      ws.onopen = function() {
        // Web Socket is connected. You can send data by send() method.
        ws.send("message to send");
      };
      ws.onmessage = function (evt) {
          var received_msg = evt.data;
          console.log(received_msg);
      };
      ws.onclose = function() {
          // websocket is closed.
      };
    } else {
      // the browser doesn't support WebSocket.
    }
/*
    // Create a socket instance
    var socket = new WebSocket('ws://192.168.1.91:3000');

    // Open the socket
    socket.onopen = function(event) {

    	// Send an initial message
    	//socket.send('I am the client and I\'m listening!');

    	// Listen for messages
    	socket.onmessage = function(event) {
    		console.log('Client received a message', event);
    	};

    	// Listen for socket closes
    	socket.onclose = function(event) {
    		console.log('Client notified socket has closed', event);
    	};

    	// To close the socket....
    	//socket.close()

    };*/
}

init();
</script>
